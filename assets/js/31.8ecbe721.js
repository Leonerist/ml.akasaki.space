(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{621:function(s,t,a){s.exports=a.p+"assets/img/image-20210713150550619.67299620.png"},622:function(s,t,a){s.exports=a.p+"assets/img/image-20210712213203846.54eff39a.png"},623:function(s,t,a){s.exports=a.p+"assets/img/image-20210712230924295.96173a4b.png"},624:function(s,t,a){s.exports=a.p+"assets/img/image-20210713155953783.bafc4c48.png"},625:function(s,t,a){s.exports=a.p+"assets/img/image-20210713161721108.f07c4820.png"},796:function(s,t,a){"use strict";a.r(t);var i=a(46),l=Object(i.a)({},(function(){var s=this,t=s.$createElement,i=s._self._c||t;return i("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[i("h1",{attrs:{id:"gcnet-global-context-networks-non-local-networks-meet-squeeze-excitation-networks-and-beyond"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#gcnet-global-context-networks-non-local-networks-meet-squeeze-excitation-networks-and-beyond"}},[s._v("#")]),s._v(" GCNet: Global Context Networks (Non-local Networks Meet Squeeze-Excitation Networks and Beyond)")]),s._v(" "),i("p",[i("a",{attrs:{href:"https://arxiv.org/search/cs?searchtype=author&query=Cao%2C+Y",target:"_blank",rel:"noopener noreferrer"}},[s._v("Yue Cao"),i("OutboundLink")],1),s._v(", "),i("a",{attrs:{href:"https://arxiv.org/search/cs?searchtype=author&query=Xu%2C+J",target:"_blank",rel:"noopener noreferrer"}},[s._v("Jiarui Xu"),i("OutboundLink")],1),s._v(", "),i("a",{attrs:{href:"https://arxiv.org/search/cs?searchtype=author&query=Lin%2C+S",target:"_blank",rel:"noopener noreferrer"}},[s._v("Stephen Lin"),i("OutboundLink")],1),s._v(", "),i("a",{attrs:{href:"https://arxiv.org/search/cs?searchtype=author&query=Wei%2C+F",target:"_blank",rel:"noopener noreferrer"}},[s._v("Fangyun Wei"),i("OutboundLink")],1),s._v(", "),i("a",{attrs:{href:"https://arxiv.org/search/cs?searchtype=author&query=Hu%2C+H",target:"_blank",rel:"noopener noreferrer"}},[s._v("Han Hu"),i("OutboundLink")],1)]),s._v(" "),i("h3",{attrs:{id:"这篇笔记的写作者是visualdust。"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#这篇笔记的写作者是visualdust。"}},[s._v("#")]),s._v(" 这篇笔记的写作者是"),i("a",{attrs:{href:"https://github.com/visualDust",target:"_blank",rel:"noopener noreferrer"}},[s._v("VisualDust"),i("OutboundLink")],1),s._v("。")]),s._v(" "),i("p",[s._v("GCNet（原论文："),i("a",{attrs:{href:"https://arxiv.org/abs/1904.11492",target:"_blank",rel:"noopener noreferrer"}},[s._v("GCNet: Non-local Networks Meet Squeeze-Excitation Networks and Beyond"),i("OutboundLink")],1),s._v("或"),i("a",{attrs:{href:"https://arxiv.org/abs/2012.13375",target:"_blank",rel:"noopener noreferrer"}},[s._v("Global Context Networks"),i("OutboundLink")],1),s._v("）这篇论文的研究思路类似于DPN，深入探讨了Non-local和SENet的优缺点，然后结合Non-local和SENet的优点提出了GCNet。")]),s._v(" "),i("blockquote",[i("p",[s._v("The Non-Local Network (NLNet) presents a pioneering approach for capturing long-range dependencies, via aggregating query-specific global context to each query position. However, through a rigorous empirical analysis, we have found that the global contexts modeled by non-local network are almost the same for different query positions within an image. In this paper, we take advantage of this finding to create a simplified network based on a query-independent formulation, which maintains the accuracy of NLNet but with significantly less computation. We further observe that this simplified design shares similar structure with Squeeze-Excitation Network (SENet). Hence we unify them into a three-step general framework for global context modeling. Within the general framework, we design a better instantiation, called the global context (GC) block, which is lightweight and can effectively model the global context. The lightweight property allows us to apply it for multiple layers in a backbone network to construct a global context network (GCNet), which generally outperforms both simplified NLNet and SENet on major benchmarks for various recognition tasks. The code and configurations are released at "),i("a",{attrs:{href:"https://github.com/xvjiarui/GCNet",target:"_blank",rel:"noopener noreferrer"}},[s._v("this https URL"),i("OutboundLink")],1),s._v(".")])]),s._v(" "),i("p",[i("img",{attrs:{src:a(621),alt:"image-20210713150550619"}})]),s._v(" "),i("p",[s._v("GCNet提出一种模块框架称为Global context modeling framework（上图中(a)），并将其分为三步：Context modeling、Transform、Fusion。")]),s._v(" "),i("p",[s._v("这篇论文选用"),i("RouterLink",{attrs:{to:"/unlimited-paper-works/[27]Non-local-Neural-Networks.html"}},[s._v("Non-Local Neural Networks")]),s._v("（上图中(b)是其简化版）的Context modeling 和 "),i("RouterLink",{attrs:{to:"/unlimited-paper-works/[23]Squeeze-and-Excitation-Networks.html"}},[s._v("Squeeze and Excitation Networks ")]),s._v("（上图中(c)是其一种形式）的 Transform过程组成新的模块Global Context (GC) block，同时训练spacial和channel-wise上的注意力。这是一篇很好的论文，有兴趣请阅读"),i("a",{attrs:{href:"https://arxiv.org/abs/1904.11492",target:"_blank",rel:"noopener noreferrer"}},[s._v("原文"),i("OutboundLink")],1),s._v("。")],1),s._v(" "),i("h2",{attrs:{id:"non-local在实践中的缺陷"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#non-local在实践中的缺陷"}},[s._v("#")]),s._v(" Non-Local在实践中的缺陷")]),s._v(" "),i("p",[s._v("这篇论文提出，NLNet（"),i("RouterLink",{attrs:{to:"/unlimited-paper-works/[27]Non-local-Neural-Networks.html"}},[s._v("Non-Local Neural Networks")]),s._v("）在长距离注意力方面作出了开创性的工作。在这里作者提出，为了建立长距离的注意力，有两种办法：")],1),s._v(" "),i("ol",[i("li",[s._v("采用"),i("strong",[s._v("自注意力机制")]),s._v("来建模query对的关系（也就是Non-Local的做法）。")]),s._v(" "),i("li",[s._v("第二种是对query-independent（可以理解为无query依赖）的"),i("strong",[s._v("全局上下文")]),s._v("建模。")])]),s._v(" "),i("p",[s._v("NLNet就是典型的采用自注意力机制来建模像素对关系。但是，作者从COCO数据集中随机选择6幅图，分别可视化3个不同位置和它们的attention maps进行实验：")]),s._v(" "),i("p",[i("img",{attrs:{src:a(622),alt:""}})]),s._v(" "),i("p",[s._v("结果发现对于不同位置来说，它们的attention maps几乎是相同的。这说明，"),i("strong",[s._v("虽然non-local block想要计算出每一个位置特定的全局上下文，但是经过训练之后，实际上形成的attention map受位置的影响非常低。")])]),s._v(" "),i("p",[s._v("也就是说，NLNet对于每一个位置学习不受位置依赖的attention map，造成了大量的计算浪费。通过严格的实验分析，作者发现non-local network的全局上下文在不同位置几乎是相同的，这表明NLNet经过训练之后实际上学习到的是弱位置依赖的全局上下文。")]),s._v(" "),i("h2",{attrs:{id:"简化non-local-block"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#简化non-local-block"}},[s._v("#")]),s._v(" 简化Non-Local block")]),s._v(" "),i("p",[s._v("如果你不知道什么是Non-Local block，请先阅读"),i("RouterLink",{attrs:{to:"/unlimited-paper-works/[27]Non-local-Neural-Networks.html"}},[s._v("Non-Local Neural Networks")]),s._v("。")],1),s._v(" "),i("p",[s._v("刚才说到通过严格的实验分析，作者发现non-local network的全局上下文上造成了大量的计算浪费。作者取其精华去其糟粕设计了简化的Non-Local block：")]),s._v(" "),i("p",[i("img",{attrs:{src:a(623),alt:"image-20210712230924295"}})]),s._v(" "),i("p",[s._v("上图中（a）是Non-Local neural Networks的原论文中提出的Non-Local block结构；（b）是这篇论文的作者重新设计的简化版本。")]),s._v(" "),i("h3",{attrs:{id:"原版non-local-block"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#原版non-local-block"}},[s._v("#")]),s._v(" 原版Non-Local block")]),s._v(" "),i("p",[i("strong",[s._v("原版Non-Local block")]),s._v("（上图中（a））（如果不知道这是什么，请先阅读请先阅读"),i("RouterLink",{attrs:{to:"/unlimited-paper-works/[27]Non-local-Neural-Networks.html"}},[s._v("Non-Local Neural Networks")]),s._v("）可以描述为：")],1),s._v(" "),i("p",{staticClass:"katex-block"},[i("span",{staticClass:"katex-display"},[i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[i("semantics",[i("mrow",[i("msub",[i("mi",[s._v("z")]),i("mi",[s._v("i")])],1),i("mo",[s._v("=")]),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("i")])],1),i("mo",[s._v("+")]),i("munderover",[i("mo",[s._v("∑")]),i("mrow",[i("mi",[s._v("j")]),i("mo",[s._v("=")]),i("mn",[s._v("1")])],1),i("msub",[i("mi",[s._v("N")]),i("mi",[s._v("p")])],1)],1),i("mfrac",[i("mrow",[i("mi",[s._v("f")]),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("i")])],1),i("mo",{attrs:{separator:"true"}},[s._v(",")]),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("j")])],1),i("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1),i("mrow",[i("mi",[s._v("C")]),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("mi",[s._v("x")]),i("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1)],1),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("msub",[i("mi",[s._v("W")]),i("mi",[s._v("v")])],1),i("mo",[s._v("⋅")]),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("i")])],1),i("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("z_i = x_i + \\sum_{j=1}^{N_p}\\frac{f(x_i,x_j)}{C(x)}(W_v\\cdot x_i)\n")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.58056em","vertical-align":"-0.15em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.04398em"}},[s._v("z")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.31166399999999994em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.04398em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("i")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),i("span",{staticClass:"mrel"},[s._v("=")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.73333em","vertical-align":"-0.15em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.31166399999999994em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("i")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[s._v("+")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"3.3504330000000007em","vertical-align":"-1.4137769999999998em"}}),i("span",{staticClass:"mop op-limits"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.9366560000000006em"}},[i("span",{staticStyle:{top:"-1.872331em","margin-left":"0em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")]),i("span",{staticClass:"mrel mtight"},[s._v("=")]),i("span",{staticClass:"mord mtight"},[s._v("1")])])])]),i("span",{staticStyle:{top:"-3.050005em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),i("span",[i("span",{staticClass:"mop op-symbol large-op"},[s._v("∑")])])]),i("span",{staticStyle:{top:"-4.4083250000000005em","margin-left":"0em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.10903em"}},[s._v("N")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.16454285714285716em"}},[i("span",{staticStyle:{top:"-2.357em","margin-left":"-0.10903em","margin-right":"0.07142857142857144em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.5em"}}),i("span",{staticClass:"sizing reset-size3 size1 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("p")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.2818857142857143em"}},[i("span")])])])])])])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.4137769999999998em"}},[i("span")])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mopen nulldelimiter"}),i("span",{staticClass:"mfrac"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.427em"}},[i("span",{staticStyle:{top:"-2.314em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.07153em"}},[s._v("C")]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"mclose"},[s._v(")")])])]),i("span",{staticStyle:{top:"-3.23em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),i("span",{staticStyle:{top:"-3.677em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.10764em"}},[s._v("f")]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.31166399999999994em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("i")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mpunct"},[s._v(",")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.311664em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[i("span")])])])])]),i("span",{staticClass:"mclose"},[s._v(")")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.936em"}},[i("span")])])])]),i("span",{staticClass:"mclose nulldelimiter"})]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("W")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.13889em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[s._v("⋅")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.31166399999999994em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("i")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mclose"},[s._v(")")])])])])])]),s._v(" "),i("p",[s._v("其中"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("mi",[s._v("C")]),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("mi",[s._v("x")]),i("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("C(x)")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.07153em"}},[s._v("C")]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"mclose"},[s._v(")")])])])]),s._v("为归一化因子；"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("mi",[s._v("f")]),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("i")])],1),i("mo",{attrs:{separator:"true"}},[s._v(",")]),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("j")])],1),i("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("f(x_i,x_j)")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"1.036108em","vertical-align":"-0.286108em"}}),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.10764em"}},[s._v("f")]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.31166399999999994em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("i")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mpunct"},[s._v(",")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.311664em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[i("span")])])])])]),i("span",{staticClass:"mclose"},[s._v(")")])])])]),s._v("为衡量相关性的函数，为了方便，定义"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("mi",[s._v("w")]),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("i")])],1),i("mo",{attrs:{separator:"true"}},[s._v(",")]),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("j")])],1),i("mo",{attrs:{stretchy:"false"}},[s._v(")")]),i("mo",[s._v("=")]),i("mfrac",[i("mrow",[i("mi",[s._v("f")]),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("i")])],1),i("mo",{attrs:{separator:"true"}},[s._v(",")]),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("j")])],1),i("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1),i("mrow",[i("mi",[s._v("C")]),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("mi",[s._v("x")]),i("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1)],1)],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("w(x_i,x_j)=\\frac{f(x_i,x_j)}{C(x)}")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"1.036108em","vertical-align":"-0.286108em"}}),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.31166399999999994em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("i")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mpunct"},[s._v(",")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.311664em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[i("span")])])])])]),i("span",{staticClass:"mclose"},[s._v(")")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),i("span",{staticClass:"mrel"},[s._v("=")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"1.55232em","vertical-align":"-0.52em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mopen nulldelimiter"}),i("span",{staticClass:"mfrac"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.03232em"}},[i("span",{staticStyle:{top:"-2.655em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.07153em"}},[s._v("C")]),i("span",{staticClass:"mopen mtight"},[s._v("(")]),i("span",{staticClass:"mord mathnormal mtight"},[s._v("x")]),i("span",{staticClass:"mclose mtight"},[s._v(")")])])])]),i("span",{staticStyle:{top:"-3.23em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),i("span",{staticStyle:{top:"-3.50732em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.10764em"}},[s._v("f")]),i("span",{staticClass:"mopen mtight"},[s._v("(")]),i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.3280857142857143em"}},[i("span",{staticStyle:{top:"-2.357em","margin-left":"0em","margin-right":"0.07142857142857144em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.5em"}}),i("span",{staticClass:"sizing reset-size3 size1 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("i")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.143em"}},[i("span")])])])])]),i("span",{staticClass:"mpunct mtight"},[s._v(",")]),i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.3280857142857143em"}},[i("span",{staticStyle:{top:"-2.357em","margin-left":"0em","margin-right":"0.07142857142857144em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.5em"}}),i("span",{staticClass:"sizing reset-size3 size1 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.2818857142857143em"}},[i("span")])])])])]),i("span",{staticClass:"mclose mtight"},[s._v(")")])])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.52em"}},[i("span")])])])]),i("span",{staticClass:"mclose nulldelimiter"})])])])]),s._v("为归一化的关系衡量函数；"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("msub",[i("mi",[s._v("W")]),i("mi",[s._v("z")])],1)],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("W_z")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.83333em","vertical-align":"-0.15em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("W")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.13889em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.04398em"}},[s._v("z")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])])])])]),s._v("和"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("msub",[i("mi",[s._v("W")]),i("mi",[s._v("v")])],1)],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("W_v")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.83333em","vertical-align":"-0.15em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("W")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.13889em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])])])])]),s._v("是线性变换矩阵。")]),s._v(" "),i("p",[s._v("在本文中，作者选择将"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("mi",[s._v("f")]),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("i")])],1),i("mo",{attrs:{separator:"true"}},[s._v(",")]),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("j")])],1),i("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("f(x_i,x_j)")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"1.036108em","vertical-align":"-0.286108em"}}),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.10764em"}},[s._v("f")]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.31166399999999994em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("i")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mpunct"},[s._v(",")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.311664em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[i("span")])])])])]),i("span",{staticClass:"mclose"},[s._v(")")])])])]),s._v("表示为Embedded Gaussian的形式：")]),s._v(" "),i("p",{staticClass:"katex-block"},[i("span",{staticClass:"katex-display"},[i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[i("semantics",[i("mrow",[i("mi",[s._v("w")]),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("i")])],1),i("mo",{attrs:{separator:"true"}},[s._v(",")]),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("j")])],1),i("mo",{attrs:{stretchy:"false"}},[s._v(")")]),i("mo",[s._v("=")]),i("mfrac",[i("mrow",[i("mi",[s._v("exp")]),i("mo",[s._v("⁡")]),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("msub",[i("mi",[s._v("W")]),i("mi",[s._v("q")])],1),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("i")])],1),i("mo",{attrs:{separator:"true"}},[s._v(",")]),i("msub",[i("mi",[s._v("W")]),i("mi",[s._v("k")])],1),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("j")])],1),i("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1),i("mrow",[i("munder",[i("mo",[s._v("∑")]),i("mi",[s._v("m")])],1),i("mi",[s._v("exp")]),i("mo",[s._v("⁡")]),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("msub",[i("mi",[s._v("W")]),i("mi",[s._v("q")])],1),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("i")])],1),i("mo",{attrs:{separator:"true"}},[s._v(",")]),i("msub",[i("mi",[s._v("W")]),i("mi",[s._v("k")])],1),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("m")])],1),i("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1)],1)],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("w(x_i,x_j) = \\frac{\\exp(W_q x_i,W_k x_j)}{\\sum_m\\exp(W_q x_i,W_k x_m)}\n")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"1.036108em","vertical-align":"-0.286108em"}}),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.31166399999999994em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("i")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mpunct"},[s._v(",")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.311664em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[i("span")])])])])]),i("span",{staticClass:"mclose"},[s._v(")")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),i("span",{staticClass:"mrel"},[s._v("=")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"2.41271em","vertical-align":"-0.9857100000000001em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mopen nulldelimiter"}),i("span",{staticClass:"mfrac"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.427em"}},[i("span",{staticStyle:{top:"-2.314em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mop"},[i("span",{staticClass:"mop op-symbol small-op",staticStyle:{position:"relative",top:"-0.0000050000000000050004em"}},[s._v("∑")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.0016819999999999613em"}},[i("span",{staticStyle:{top:"-2.40029em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("m")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.29971000000000003em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mop"},[s._v("exp")]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("W")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15139200000000003em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.13889em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03588em"}},[s._v("q")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[i("span")])])])])]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.31166399999999994em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("i")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mpunct"},[s._v(",")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("W")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.13889em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[s._v("k")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("m")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mclose"},[s._v(")")])])]),i("span",{staticStyle:{top:"-3.23em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),i("span",{staticStyle:{top:"-3.677em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mop"},[s._v("exp")]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("W")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15139200000000003em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.13889em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03588em"}},[s._v("q")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[i("span")])])])])]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.31166399999999994em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("i")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mpunct"},[s._v(",")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("W")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.13889em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[s._v("k")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.311664em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[i("span")])])])])]),i("span",{staticClass:"mclose"},[s._v(")")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.9857100000000001em"}},[i("span")])])])]),i("span",{staticClass:"mclose nulldelimiter"})])])])])])]),s._v(" "),i("h3",{attrs:{id:"简化的non-local-block"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#简化的non-local-block"}},[s._v("#")]),s._v(" 简化的Non-Local block")]),s._v(" "),i("p",[i("strong",[s._v("简化后的Non-Local block")]),s._v("（上图中（b））可以描述为：")]),s._v(" "),i("p",{staticClass:"katex-block"},[i("span",{staticClass:"katex-display"},[i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[i("semantics",[i("mrow",[i("msub",[i("mi",[s._v("z")]),i("mi",[s._v("i")])],1),i("mo",[s._v("=")]),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("i")])],1),i("mo",[s._v("+")]),i("munderover",[i("mo",[s._v("∑")]),i("mrow",[i("mi",[s._v("j")]),i("mo",[s._v("=")]),i("mn",[s._v("1")])],1),i("msub",[i("mi",[s._v("N")]),i("mi",[s._v("p")])],1)],1),i("mo",{attrs:{stretchy:"false"}},[s._v("[")]),i("mfrac",[i("mrow",[i("mi",[s._v("exp")]),i("mo",[s._v("⁡")]),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("msub",[i("mi",[s._v("W")]),i("mi",[s._v("k")])],1),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("j")])],1),i("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1),i("mrow",[i("munderover",[i("mo",[s._v("∑")]),i("mrow",[i("mi",[s._v("m")]),i("mo",[s._v("=")]),i("mn",[s._v("1")])],1),i("msub",[i("mi",[s._v("N")]),i("mi",[s._v("p")])],1)],1),i("mi",[s._v("exp")]),i("mo",[s._v("⁡")]),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("msub",[i("mi",[s._v("W")]),i("mi",[s._v("k")])],1),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("m")])],1),i("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1)],1),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("msub",[i("mi",[s._v("W")]),i("mi",[s._v("v")])],1),i("mo",[s._v("⋅")]),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("j")])],1),i("mo",{attrs:{stretchy:"false"}},[s._v(")")]),i("mo",{attrs:{stretchy:"false"}},[s._v("]")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("z_i = x_i + \\sum_{j=1}^{N_p}[\\frac{\\exp(W_k x_j)}{\\sum_{m=1}^{N_p}\\exp(W_k x_m)}(W_v\\cdot x_j)]\n")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.58056em","vertical-align":"-0.15em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.04398em"}},[s._v("z")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.31166399999999994em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.04398em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("i")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),i("span",{staticClass:"mrel"},[s._v("=")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.73333em","vertical-align":"-0.15em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.31166399999999994em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("i")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[s._v("+")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"3.3504330000000007em","vertical-align":"-1.4137769999999998em"}}),i("span",{staticClass:"mop op-limits"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.9366560000000006em"}},[i("span",{staticStyle:{top:"-1.872331em","margin-left":"0em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")]),i("span",{staticClass:"mrel mtight"},[s._v("=")]),i("span",{staticClass:"mord mtight"},[s._v("1")])])])]),i("span",{staticStyle:{top:"-3.050005em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),i("span",[i("span",{staticClass:"mop op-symbol large-op"},[s._v("∑")])])]),i("span",{staticStyle:{top:"-4.4083250000000005em","margin-left":"0em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.10903em"}},[s._v("N")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.16454285714285716em"}},[i("span",{staticStyle:{top:"-2.357em","margin-left":"-0.10903em","margin-right":"0.07142857142857144em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.5em"}}),i("span",{staticClass:"sizing reset-size3 size1 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("p")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.2818857142857143em"}},[i("span")])])])])])])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.4137769999999998em"}},[i("span")])])])]),i("span",{staticClass:"mopen"},[s._v("[")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mopen nulldelimiter"}),i("span",{staticClass:"mfrac"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.427em"}},[i("span",{staticStyle:{top:"-2.11em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.020451em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mop"},[i("span",{staticClass:"mop op-symbol small-op",staticStyle:{position:"relative",top:"-0.0000050000000000050004em"}},[s._v("∑")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.020451em"}},[i("span",{staticStyle:{top:"-2.433692em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("m")]),i("span",{staticClass:"mrel mtight"},[s._v("=")]),i("span",{staticClass:"mord mtight"},[s._v("1")])])])]),i("span",{staticStyle:{top:"-3.2421200000000003em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.10903em"}},[s._v("N")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.16454285714285716em"}},[i("span",{staticStyle:{top:"-2.357em","margin-left":"-0.10903em","margin-right":"0.07142857142857144em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.5em"}}),i("span",{staticClass:"sizing reset-size3 size1 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("p")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.2818857142857143em"}},[i("span")])])])])])])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.26630799999999993em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mop"},[s._v("exp")]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("W")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.13889em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[s._v("k")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("m")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mclose"},[s._v(")")])])]),i("span",{staticStyle:{top:"-3.250451em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.020451em"}}),i("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),i("span",{staticStyle:{top:"-3.697451em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.020451em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mop"},[s._v("exp")]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("W")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.13889em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[s._v("k")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.311664em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[i("span")])])])])]),i("span",{staticClass:"mclose"},[s._v(")")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.1767589999999999em"}},[i("span")])])])]),i("span",{staticClass:"mclose nulldelimiter"})]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("W")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.13889em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[s._v("⋅")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"1.036108em","vertical-align":"-0.286108em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.311664em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[i("span")])])])])]),i("span",{staticClass:"mclose"},[s._v(")]")])])])])])]),s._v(" "),i("p",[s._v("其中"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("msub",[i("mi",[s._v("W")]),i("mi",[s._v("k")])],1)],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("W_k")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.83333em","vertical-align":"-0.15em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("W")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.13889em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[s._v("k")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])])])])]),s._v("和"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("msub",[i("mi",[s._v("W")]),i("mi",[s._v("v")])],1)],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("W_v")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.83333em","vertical-align":"-0.15em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("W")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.13889em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])])])])]),s._v("是线性变换矩阵。为了进一步降低计算量作者将"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("msub",[i("mi",[s._v("W")]),i("mi",[s._v("v")])],1)],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("W_v")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.83333em","vertical-align":"-0.15em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("W")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.13889em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])])])])]),s._v("移动到attention pooling的外面，表示为：")]),s._v(" "),i("p",{staticClass:"katex-block"},[i("span",{staticClass:"katex-display"},[i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[i("semantics",[i("mrow",[i("msub",[i("mi",[s._v("z")]),i("mi",[s._v("i")])],1),i("mo",[s._v("=")]),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("i")])],1),i("mo",[s._v("+")]),i("msub",[i("mi",[s._v("W")]),i("mi",[s._v("v")])],1),i("munderover",[i("mo",[s._v("∑")]),i("mrow",[i("mi",[s._v("j")]),i("mo",[s._v("=")]),i("mn",[s._v("1")])],1),i("msub",[i("mi",[s._v("N")]),i("mi",[s._v("p")])],1)],1),i("mfrac",[i("mrow",[i("mi",[s._v("exp")]),i("mo",[s._v("⁡")]),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("msub",[i("mi",[s._v("W")]),i("mi",[s._v("k")])],1),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("j")])],1),i("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1),i("mrow",[i("munderover",[i("mo",[s._v("∑")]),i("mrow",[i("mi",[s._v("m")]),i("mo",[s._v("=")]),i("mn",[s._v("1")])],1),i("msub",[i("mi",[s._v("N")]),i("mi",[s._v("p")])],1)],1),i("mi",[s._v("exp")]),i("mo",[s._v("⁡")]),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("msub",[i("mi",[s._v("W")]),i("mi",[s._v("k")])],1),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("m")])],1),i("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1)],1),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("j")])],1)],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("z_i = x_i + W_v\\sum_{j=1}^{N_p}\\frac{\\exp(W_k x_j)}{\\sum_{m=1}^{N_p}\\exp(W_k x_m)}x_j\n")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.58056em","vertical-align":"-0.15em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.04398em"}},[s._v("z")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.31166399999999994em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.04398em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("i")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),i("span",{staticClass:"mrel"},[s._v("=")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.73333em","vertical-align":"-0.15em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.31166399999999994em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("i")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[s._v("+")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"3.3504330000000007em","vertical-align":"-1.4137769999999998em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("W")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.13889em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mop op-limits"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.9366560000000006em"}},[i("span",{staticStyle:{top:"-1.872331em","margin-left":"0em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")]),i("span",{staticClass:"mrel mtight"},[s._v("=")]),i("span",{staticClass:"mord mtight"},[s._v("1")])])])]),i("span",{staticStyle:{top:"-3.050005em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),i("span",[i("span",{staticClass:"mop op-symbol large-op"},[s._v("∑")])])]),i("span",{staticStyle:{top:"-4.4083250000000005em","margin-left":"0em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.10903em"}},[s._v("N")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.16454285714285716em"}},[i("span",{staticStyle:{top:"-2.357em","margin-left":"-0.10903em","margin-right":"0.07142857142857144em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.5em"}}),i("span",{staticClass:"sizing reset-size3 size1 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("p")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.2818857142857143em"}},[i("span")])])])])])])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.4137769999999998em"}},[i("span")])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mopen nulldelimiter"}),i("span",{staticClass:"mfrac"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.427em"}},[i("span",{staticStyle:{top:"-2.11em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.020451em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mop"},[i("span",{staticClass:"mop op-symbol small-op",staticStyle:{position:"relative",top:"-0.0000050000000000050004em"}},[s._v("∑")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.020451em"}},[i("span",{staticStyle:{top:"-2.433692em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("m")]),i("span",{staticClass:"mrel mtight"},[s._v("=")]),i("span",{staticClass:"mord mtight"},[s._v("1")])])])]),i("span",{staticStyle:{top:"-3.2421200000000003em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.10903em"}},[s._v("N")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.16454285714285716em"}},[i("span",{staticStyle:{top:"-2.357em","margin-left":"-0.10903em","margin-right":"0.07142857142857144em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.5em"}}),i("span",{staticClass:"sizing reset-size3 size1 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("p")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.2818857142857143em"}},[i("span")])])])])])])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.26630799999999993em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mop"},[s._v("exp")]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("W")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.13889em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[s._v("k")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("m")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mclose"},[s._v(")")])])]),i("span",{staticStyle:{top:"-3.250451em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.020451em"}}),i("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),i("span",{staticStyle:{top:"-3.697451em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.020451em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mop"},[s._v("exp")]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("W")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.13889em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[s._v("k")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.311664em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[i("span")])])])])]),i("span",{staticClass:"mclose"},[s._v(")")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.1767589999999999em"}},[i("span")])])])]),i("span",{staticClass:"mclose nulldelimiter"})]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.311664em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[i("span")])])])])])])])])])]),s._v(" "),i("p",[s._v("这样修改之后，"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("mn",[s._v("1")]),i("mo",[s._v("×")]),i("mn",[s._v("1")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("1\\times 1")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.72777em","vertical-align":"-0.08333em"}}),i("span",{staticClass:"mord"},[s._v("1")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[s._v("×")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.64444em","vertical-align":"0em"}}),i("span",{staticClass:"mord"},[s._v("1")])])])]),s._v("卷积的FLOPs从"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("mi",[s._v("O")]),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("mi",[s._v("H")]),i("mi",[s._v("W")]),i("msup",[i("mi",[s._v("C")]),i("mn",[s._v("2")])],1),i("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("O(HWC^2)")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"1.064108em","vertical-align":"-0.25em"}}),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.02778em"}},[s._v("O")]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.08125em"}},[s._v("H")]),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("W")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.07153em"}},[s._v("C")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.8141079999999999em"}},[i("span",{staticStyle:{top:"-3.063em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[s._v("2")])])])])])])])]),i("span",{staticClass:"mclose"},[s._v(")")])])])]),s._v("降低到了"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("mi",[s._v("O")]),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("msup",[i("mi",[s._v("C")]),i("mn",[s._v("2")])],1),i("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("O(C^2)")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"1.064108em","vertical-align":"-0.25em"}}),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.02778em"}},[s._v("O")]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.07153em"}},[s._v("C")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.8141079999999999em"}},[i("span",{staticStyle:{top:"-3.063em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[s._v("2")])])])])])])])]),i("span",{staticClass:"mclose"},[s._v(")")])])])]),s._v("。")]),s._v(" "),i("p",[s._v("不同于原始的non-local block，简化版non-local block的第二项是不受位置依赖的，所有位置共享这一项。因此，作者直接将全局上下文建模为所有位置特征的加权平均值，然后聚集全局上下文特征到每个位置的特征上。")]),s._v(" "),i("h2",{attrs:{id:"global-context-modeling-framework"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#global-context-modeling-framework"}},[s._v("#")]),s._v(" Global Context Modeling Framework")]),s._v(" "),i("p",[s._v("如同上文的叙述，简化版的non-local block可以抽象为3个步骤：")]),s._v(" "),i("ol",[i("li",[s._v("全局attention pooling：采用"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("mn",[s._v("1")]),i("mo",[s._v("×")]),i("mn",[s._v("1")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("1\\times1")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.72777em","vertical-align":"-0.08333em"}}),i("span",{staticClass:"mord"},[s._v("1")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[s._v("×")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.64444em","vertical-align":"0em"}}),i("span",{staticClass:"mord"},[s._v("1")])])])]),s._v("卷积"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("msub",[i("mi",[s._v("W")]),i("mi",[s._v("k")])],1)],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("W_k")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.83333em","vertical-align":"-0.15em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("W")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.13889em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[s._v("k")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])])])])]),s._v("和softmax函数来获取attention map，然后执行attention pooling获得全局上下文特征。")]),s._v(" "),i("li",[s._v("使用"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("mn",[s._v("1")]),i("mo",[s._v("×")]),i("mn",[s._v("1")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("1\\times 1")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.72777em","vertical-align":"-0.08333em"}}),i("span",{staticClass:"mord"},[s._v("1")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[s._v("×")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.64444em","vertical-align":"0em"}}),i("span",{staticClass:"mord"},[s._v("1")])])])]),s._v("卷积的线性变换"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("msub",[i("mi",[s._v("W")]),i("mi",[s._v("v")])],1)],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("W_v")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.83333em","vertical-align":"-0.15em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("W")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.13889em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])])])])]),s._v("进行特征转换。")]),s._v(" "),i("li",[s._v("将得到的全局上下文特征通过加和的方式整合到每个位置上。")])]),s._v(" "),i("p",[s._v("整体过程的模块设计如图所示：")]),s._v(" "),i("p",[i("img",{attrs:{src:a(624),alt:"image-20210713155953783"}})]),s._v(" "),i("p",[s._v("作者将该抽象过程描述为下面的这个公式：")]),s._v(" "),i("p",{staticClass:"katex-block"},[i("span",{staticClass:"katex-display"},[i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[i("semantics",[i("mrow",[i("msub",[i("mi",[s._v("z")]),i("mi",[s._v("i")])],1),i("mo",[s._v("=")]),i("mi",[s._v("F")]),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("i")])],1),i("mo",{attrs:{separator:"true"}},[s._v(",")]),i("mi",[s._v("δ")]),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("munderover",[i("mo",[s._v("∑")]),i("mrow",[i("mi",[s._v("j")]),i("mo",[s._v("=")]),i("mn",[s._v("1")])],1),i("msub",[i("mi",[s._v("N")]),i("mi",[s._v("p")])],1)],1),i("msub",[i("mi",[s._v("α")]),i("mi",[s._v("j")])],1),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("j")])],1),i("mo",{attrs:{stretchy:"false"}},[s._v(")")]),i("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("z_i = F(x_i, \\delta(\\sum_{j=1}^{N_p}\\alpha_jx_j))\n")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.58056em","vertical-align":"-0.15em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.04398em"}},[s._v("z")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.31166399999999994em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.04398em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("i")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),i("span",{staticClass:"mrel"},[s._v("=")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"3.3504330000000007em","vertical-align":"-1.4137769999999998em"}}),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("F")]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.31166399999999994em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("i")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mpunct"},[s._v(",")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03785em"}},[s._v("δ")]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mop op-limits"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.9366560000000006em"}},[i("span",{staticStyle:{top:"-1.872331em","margin-left":"0em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")]),i("span",{staticClass:"mrel mtight"},[s._v("=")]),i("span",{staticClass:"mord mtight"},[s._v("1")])])])]),i("span",{staticStyle:{top:"-3.050005em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),i("span",[i("span",{staticClass:"mop op-symbol large-op"},[s._v("∑")])])]),i("span",{staticStyle:{top:"-4.4083250000000005em","margin-left":"0em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.10903em"}},[s._v("N")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.16454285714285716em"}},[i("span",{staticStyle:{top:"-2.357em","margin-left":"-0.10903em","margin-right":"0.07142857142857144em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.5em"}}),i("span",{staticClass:"sizing reset-size3 size1 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("p")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.2818857142857143em"}},[i("span")])])])])])])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.4137769999999998em"}},[i("span")])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.0037em"}},[s._v("α")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.311664em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.0037em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[i("span")])])])])]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.311664em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[i("span")])])])])]),i("span",{staticClass:"mclose"},[s._v("))")])])])])])]),s._v(" "),i("p",[s._v("其中"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("msubsup",[i("mo",[s._v("∑")]),i("mrow",[i("mi",[s._v("j")]),i("mo",[s._v("=")]),i("mn",[s._v("1")])],1),i("msub",[i("mi",[s._v("N")]),i("mi",[s._v("p")])],1)],1),i("msub",[i("mi",[s._v("α")]),i("mi",[s._v("j")])],1),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("j")])],1)],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\sum_{j=1}^{N_p}\\alpha_jx_j")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"1.433423em","vertical-align":"-0.4129719999999999em"}}),i("span",{staticClass:"mop"},[i("span",{staticClass:"mop op-symbol small-op",staticStyle:{position:"relative",top:"-0.0000050000000000050004em"}},[s._v("∑")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.020451em"}},[i("span",{staticStyle:{top:"-2.4231360000000004em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")]),i("span",{staticClass:"mrel mtight"},[s._v("=")]),i("span",{staticClass:"mord mtight"},[s._v("1")])])])]),i("span",{staticStyle:{top:"-3.2421200000000003em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.10903em"}},[s._v("N")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.16454285714285716em"}},[i("span",{staticStyle:{top:"-2.357em","margin-left":"-0.10903em","margin-right":"0.07142857142857144em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.5em"}}),i("span",{staticClass:"sizing reset-size3 size1 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("p")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.2818857142857143em"}},[i("span")])])])])])])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.4129719999999999em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.0037em"}},[s._v("α")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.311664em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.0037em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[i("span")])])])])]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.311664em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[i("span")])])])])])])])]),s._v("被称为"),i("strong",[s._v("context modeling")]),s._v("模块，用于通过权值"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("mi",[s._v("α")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\alpha")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.43056em","vertical-align":"0em"}}),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.0037em"}},[s._v("α")])])])]),s._v("聚合来自全局各个位置的特征；"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("mi",[s._v("δ")]),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("mo",[s._v("⋅")]),i("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\delta(\\cdot)")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03785em"}},[s._v("δ")]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mord"},[s._v("⋅")]),i("span",{staticClass:"mclose"},[s._v(")")])])])]),s._v("表示一种用于捕获通道见相关性的transform；"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("mi",[s._v("F")]),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("mo",[s._v("⋅")]),i("mo",{attrs:{separator:"true"}},[s._v(",")]),i("mo",[s._v("⋅")]),i("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("F(\\cdot,\\cdot)")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("F")]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mord"},[s._v("⋅")]),i("span",{staticClass:"mpunct"},[s._v(",")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord"},[s._v("⋅")]),i("span",{staticClass:"mclose"},[s._v(")")])])])]),s._v("表示一个特征fusion的过程，在这里特指使用fusion函数将获得的全局上下文特征整合到每个位置上。")]),s._v(" "),i("p",[s._v("接下来，论文提出将SEBlock的操作分为三步：")]),s._v(" "),i("ol",[i("li",[s._v("global average pooling用于上下文建模(即squeeze操作)。")]),s._v(" "),i("li",[s._v("bottleneck transform用于计算每个通道的重要程度(即excitation operation)。")]),s._v(" "),i("li",[s._v("rescaling function用于通道特征重标定(即element-wise multiplication)。")])]),s._v(" "),i("p",[s._v("并提出，其中的第一步（squeeze操作）可以替换为简化版的Non-Local Block。")]),s._v(" "),i("h2",{attrs:{id:"global-context-block-gcblock"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#global-context-block-gcblock"}},[s._v("#")]),s._v(" Global Context Block (GCBlock)")]),s._v(" "),i("p",[s._v("作者提出了一种新的全局上下文建模框架，global context block(简写GCNet)，即能够像SNL block一样建立有效的长距离依赖，又能够像SEblock一样建立通道间的关系：")]),s._v(" "),i("p",[i("img",{attrs:{src:a(625),alt:"image-20210713161721108"}})]),s._v(" "),i("p",[s._v("在简化版的non-local block中，transform模块有大量的参数。为了获得SE block轻量的优点，1x1卷积用bottleneck transform模块来取代，能够显著的降低参数量(其中r是降低率)。因为两层bottleneck transform增加了优化难度，所以在ReLU前面增加一个layer normalization层(降低优化难度且作为正则提高了泛化性)。")]),s._v(" "),i("p",[s._v("GCBlock可以被表示为下面的公式：")]),s._v(" "),i("p",{staticClass:"katex-block"},[i("span",{staticClass:"katex-display"},[i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[i("semantics",[i("mrow",[i("msub",[i("mi",[s._v("z")]),i("mi",[s._v("i")])],1),i("mo",[s._v("=")]),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("i")])],1),i("mo",[s._v("+")]),i("msub",[i("mi",[s._v("W")]),i("mrow",[i("mi",[s._v("v")]),i("mn",[s._v("2")])],1)],1),i("mi",[s._v("R")]),i("mi",[s._v("e")]),i("mi",[s._v("l")]),i("mi",[s._v("u")]),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("mi",[s._v("L")]),i("mi",[s._v("N")]),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("msub",[i("mi",[s._v("W")]),i("mrow",[i("mi",[s._v("v")]),i("mn",[s._v("1")])],1)],1),i("munderover",[i("mo",[s._v("∑")]),i("mrow",[i("mi",[s._v("j")]),i("mo",[s._v("=")]),i("mn",[s._v("1")])],1),i("msub",[i("mi",[s._v("N")]),i("mi",[s._v("p")])],1)],1),i("msub",[i("mi",[s._v("α")]),i("mi",[s._v("j")])],1),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("j")])],1),i("mo",{attrs:{stretchy:"false"}},[s._v(")")]),i("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("z_i = x_i + W_{v2}Relu(LN(W_{v1}\\sum_{j=1}^{N_p}\\alpha_j x_j))\n")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.58056em","vertical-align":"-0.15em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.04398em"}},[s._v("z")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.31166399999999994em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.04398em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("i")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),i("span",{staticClass:"mrel"},[s._v("=")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.73333em","vertical-align":"-0.15em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.31166399999999994em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("i")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[s._v("+")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"3.3504330000000007em","vertical-align":"-1.4137769999999998em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("W")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.30110799999999993em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.13889em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")]),i("span",{staticClass:"mord mtight"},[s._v("2")])])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.00773em"}},[s._v("R")]),i("span",{staticClass:"mord mathnormal"},[s._v("e")]),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.01968em"}},[s._v("l")]),i("span",{staticClass:"mord mathnormal"},[s._v("u")]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mord mathnormal"},[s._v("L")]),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.10903em"}},[s._v("N")]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("W")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.30110799999999993em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.13889em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")]),i("span",{staticClass:"mord mtight"},[s._v("1")])])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mop op-limits"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.9366560000000006em"}},[i("span",{staticStyle:{top:"-1.872331em","margin-left":"0em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")]),i("span",{staticClass:"mrel mtight"},[s._v("=")]),i("span",{staticClass:"mord mtight"},[s._v("1")])])])]),i("span",{staticStyle:{top:"-3.050005em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),i("span",[i("span",{staticClass:"mop op-symbol large-op"},[s._v("∑")])])]),i("span",{staticStyle:{top:"-4.4083250000000005em","margin-left":"0em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.10903em"}},[s._v("N")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.16454285714285716em"}},[i("span",{staticStyle:{top:"-2.357em","margin-left":"-0.10903em","margin-right":"0.07142857142857144em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.5em"}}),i("span",{staticClass:"sizing reset-size3 size1 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("p")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.2818857142857143em"}},[i("span")])])])])])])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.4137769999999998em"}},[i("span")])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.0037em"}},[s._v("α")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.311664em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.0037em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[i("span")])])])])]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.311664em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[i("span")])])])])]),i("span",{staticClass:"mclose"},[s._v("))")])])])])])]),s._v(" "),i("p",[s._v("上式中：")]),s._v(" "),i("p",{staticClass:"katex-block"},[i("span",{staticClass:"katex-display"},[i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[i("semantics",[i("mrow",[i("msub",[i("mi",[s._v("α")]),i("mi",[s._v("j")])],1),i("mo",[s._v("=")]),i("mfrac",[i("msup",[i("mi",[s._v("e")]),i("mrow",[i("msub",[i("mi",[s._v("W")]),i("mi",[s._v("k")])],1),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("j")])],1)],1)],1),i("mrow",[i("munderover",[i("mo",[s._v("∑")]),i("mrow",[i("mi",[s._v("m")]),i("mo",[s._v("=")]),i("mn",[s._v("1")])],1),i("msub",[i("mi",[s._v("N")]),i("mi",[s._v("p")])],1)],1),i("msup",[i("mi",[s._v("e")]),i("mrow",[i("msub",[i("mi",[s._v("W")]),i("mi",[s._v("k")])],1),i("msub",[i("mi",[s._v("x")]),i("mi",[s._v("m")])],1)],1)],1)],1)],1)],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\alpha_j = \\frac{e^{W_k x_j}}{\\sum_{m=1}^{N_p}e^{W_k x_m}}\n")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.716668em","vertical-align":"-0.286108em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.0037em"}},[s._v("α")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.311664em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.0037em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),i("span",{staticClass:"mrel"},[s._v("=")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"2.69509em","vertical-align":"-1.1767589999999999em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mopen nulldelimiter"}),i("span",{staticClass:"mfrac"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.518331em"}},[i("span",{staticStyle:{top:"-2.11em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.020451em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mop"},[i("span",{staticClass:"mop op-symbol small-op",staticStyle:{position:"relative",top:"-0.0000050000000000050004em"}},[s._v("∑")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.020451em"}},[i("span",{staticStyle:{top:"-2.433692em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("m")]),i("span",{staticClass:"mrel mtight"},[s._v("=")]),i("span",{staticClass:"mord mtight"},[s._v("1")])])])]),i("span",{staticStyle:{top:"-3.2421200000000003em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.10903em"}},[s._v("N")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.16454285714285716em"}},[i("span",{staticStyle:{top:"-2.357em","margin-left":"-0.10903em","margin-right":"0.07142857142857144em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.5em"}}),i("span",{staticClass:"sizing reset-size3 size1 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("p")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.2818857142857143em"}},[i("span")])])])])])])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.26630799999999993em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("e")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.767331em"}},[i("span",{staticStyle:{top:"-2.989em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.13889em"}},[s._v("W")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.3448em"}},[i("span",{staticStyle:{top:"-2.3487714285714287em","margin-left":"-0.13889em","margin-right":"0.07142857142857144em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.5em"}}),i("span",{staticClass:"sizing reset-size3 size1 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[s._v("k")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15122857142857138em"}},[i("span")])])])])]),i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.16454285714285719em"}},[i("span",{staticStyle:{top:"-2.357em","margin-left":"0em","margin-right":"0.07142857142857144em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.5em"}}),i("span",{staticClass:"sizing reset-size3 size1 mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("m")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.143em"}},[i("span")])])])])])])])])])])])])])])]),i("span",{staticStyle:{top:"-3.250451em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.020451em"}}),i("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),i("span",{staticStyle:{top:"-3.697451em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.020451em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[s._v("e")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.841331em"}},[i("span",{staticStyle:{top:"-3.063em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.13889em"}},[s._v("W")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.3448em"}},[i("span",{staticStyle:{top:"-2.3487714285714287em","margin-left":"-0.13889em","margin-right":"0.07142857142857144em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.5em"}}),i("span",{staticClass:"sizing reset-size3 size1 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[s._v("k")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15122857142857138em"}},[i("span")])])])])]),i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[s._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.3280857142857143em"}},[i("span",{staticStyle:{top:"-2.357em","margin-left":"0em","margin-right":"0.07142857142857144em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.5em"}}),i("span",{staticClass:"sizing reset-size3 size1 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.2818857142857143em"}},[i("span")])])])])])])])])])])])])])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.1767589999999999em"}},[i("span")])])])]),i("span",{staticClass:"mclose nulldelimiter"})])])])])])]),s._v(" "),i("p",[s._v("是全局attention pooling的权值，"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("mi",[s._v("δ")]),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("mo",[s._v("⋅")]),i("mo",{attrs:{stretchy:"false"}},[s._v(")")]),i("mo",[s._v("=")]),i("msub",[i("mi",[s._v("W")]),i("mrow",[i("mi",[s._v("v")]),i("mn",[s._v("2")])],1)],1),i("mi",[s._v("R")]),i("mi",[s._v("e")]),i("mi",[s._v("L")]),i("mi",[s._v("U")]),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("mi",[s._v("L")]),i("mi",[s._v("N")]),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("msub",[i("mi",[s._v("W")]),i("mrow",[i("mi",[s._v("v")]),i("mn",[s._v("1")])],1)],1),i("mo",{attrs:{stretchy:"false"}},[s._v("(")]),i("mo",[s._v("⋅")]),i("mo",{attrs:{stretchy:"false"}},[s._v(")")]),i("mo",{attrs:{stretchy:"false"}},[s._v(")")]),i("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\delta(\\cdot)=W_{v2}ReLU(LN(W_{v1}(\\cdot)))")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03785em"}},[s._v("δ")]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mord"},[s._v("⋅")]),i("span",{staticClass:"mclose"},[s._v(")")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),i("span",{staticClass:"mrel"},[s._v("=")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("W")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.30110799999999993em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.13889em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")]),i("span",{staticClass:"mord mtight"},[s._v("2")])])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.00773em"}},[s._v("R")]),i("span",{staticClass:"mord mathnormal"},[s._v("e")]),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.10903em"}},[s._v("LU")]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mord mathnormal"},[s._v("L")]),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.10903em"}},[s._v("N")]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("W")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.30110799999999993em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.13889em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")]),i("span",{staticClass:"mord mtight"},[s._v("1")])])])])]),i("span",{staticClass:"vlist-s"},[s._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mopen"},[s._v("(")]),i("span",{staticClass:"mord"},[s._v("⋅")]),i("span",{staticClass:"mclose"},[s._v(")))")])])])]),s._v("表示bottleneck transform的过程。")]),s._v(" "),i("p",[s._v("也就是说，GCblock的操作可以分为以下三个步骤：")]),s._v(" "),i("ol",[i("li",[s._v("global attention pooling用于上下文建模。")]),s._v(" "),i("li",[s._v("bottleneck transform来捕获通道间依赖。")]),s._v(" "),i("li",[s._v("broadcast element-wise addition用于特征融合。")])]),s._v(" "),i("h2",{attrs:{id:"有效性的讨论"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#有效性的讨论"}},[s._v("#")]),s._v(" 有效性的讨论")]),s._v(" "),i("p",[s._v("这篇论文很精彩，但是有以下几个问题让人想不通：")]),s._v(" "),i("ol",[i("li",[i("p",[s._v("为什么Non-Local在不同的query位置生成的attention map是几乎相同的？")]),s._v(" "),i("p",[s._v("已经有两篇论文（OCNet、DANet）证实了在分割模型里面加入non-local算子可以让学习得到的attention map集中在和query pixel同类别的区域，而不是和query无关。可能这个问题是和具体任务相关的。")])]),s._v(" "),i("li",[i("p",[s._v("文中的Global Context Modeling为何要这样设计也是一个问题。")]),s._v(" "),i("p",[s._v("根据论文中给出的公式，似乎使用全连接和一个残差连接能达到类似的功能。")])])])])}),[],!1,null,null,null);t.default=l.exports}}]);